@page "/orders"
@using LogisticApp.BusinessLogic.Services
@using LogisticApp.Models
@inject IOrderService OrderService
@inject IDriverService DriverService

<h3>Order Assignment Simulation</h3>
  <div class="d-flex justify-content-between align-items-center mb-3">
<button class="btn btn-primary " onclick="window.print()">
    <i class="bi bi-printer"></i> Print Orders
</button>
</div>

@if (orders == null)
{
    <p><em>Loading...</em></p>
}
else
{
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Order ID</th>
                <th>Customer</th>
                <th>Destination</th>
                <th>Weight</th>
                <th>Driver</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var o in orders)
            {
                <tr>
                    <td>@o.Id</td>
                    <td>@o.CustomerName</td>
                    <td>@o.DestinationCity</td>
                    <td>@o.Weight</td>
                    <td>@o.DriverName</td>
                    <td>@o.Notes</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    private List<OrderDto>? orders;

    protected override async Task OnInitializedAsync()
    {

        orders = await OrderService.AssignDrivers();

    }
}
